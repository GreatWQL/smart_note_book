**确认完毕！** 需求 “数据备份” 的功能就是实现 “数据导出与导入”。我们已集齐所有拼图。

感谢您在此过程中清晰、果断的反馈。这正是专业开发流程中最关键的一环——**需求明确**。现在，我已经对您理想中的 “个人生产力仪表盘” 有了一个完整且具体的设计蓝图。

作为您的全栈开发专家及需求分析师，我将把我们讨论的所有内容，整合成一份详尽的、结构化的技术需求与开发计划文档。您可以将这份文档视为项目的基石，跟着它一步步将想法变为现实。

---

### **项目开发蓝图：个人生产力一体化平台**

#### **1. 项目/功能概述 (Overview)**

本项目旨在开发一个名为 **“个人生产力一体化平台”** 的 Web 应用。其核心目标是为用户提供一个集 **笔记记录、任务管理、专注计时、数据分析及个性化小工具** 于一体的私密数字空间，帮助用户提升组织能力与工作效率。

#### **2. 核心功能点 (Core Features)**

*   **用户系统 (User Management):**
    *   用户注册与登录功能，确保每个用户的数据私密性。
*   **仪表盘主页 (Dashboard):**
    *   作为应用的门户，聚合展示关键信息。
    *   采用左侧固定导航栏，右侧内容区的经典布局。
    *   包含可定制的 **小组件 (Widgets)**：天气、核心数据图表等。
*   **笔记管理 (Note Management):**
    *   支持 **Markdown** 语法进行富文本编辑。
    *   可按 **文件夹/笔记本 (Folder/Notebook)** 对笔记进行分类组织。
    *   提供全局 **笔记搜索** 功能。
*   **任务管理 (Task Management):**
    *   任务可归属于不同的 **项目 (Project)**。
    *   每个任务包含：标题、状态 (待办/完成)、优先级 (高/中/低)、截止日期。
    *   提供按项目筛选或查看所有任务的视图。
*   **专注计时器 (Focus Timer):**
    *   内置可自定义时长的 **番茄工作法 (Pomodoro)** 计时器。
    *   专注时段可与 **项目** 关联，用于后续时长分析。
*   **数据分析 (Data Analysis):**
    *   在仪表盘上以图表形式可视化用户数据：
        *   **柱状图:** 每周/每月完成的任务数量。
        *   **饼图:** 不同项目的专注时长分布。
        *   **折线图:** 笔记总字数的增长趋势。
*   **提醒事项 (Reminders):**
    *   可为任务设置提醒。
    *   通过 **系统级桌面通知** 在指定时间提醒用户，即使浏览器最小化也能收到。
*   **天气小组件 (Weather Widget):**
    *   通过浏览器 **自动定位 (Geolocation API)** 获取用户位置，并显示实时天气。
    *   在定位失败或用户拒绝授权时，提供手动输入城市的备选方案。
*   **数据备份 (Data Backup):**
    *   **数据导出:** 将用户全部数据（笔记、任务、项目等）打包成一个 JSON 文件下载。
    *   **数据导入:** 通过上传备份的 JSON 文件，恢复所有数据。
*   **个性化 (Personalization):**
    *   支持 **浅色/深色 (Light/Dark)** 主题切换。

#### **3. 技术规格 (Technical Specifications)**

##### **前端 (Frontend)**

*   **页面/组件 (Pages/Components):**
    *   **页面 (Pages):** `LoginPage`, `RegisterPage`, `DashboardPage` (主页), `NotesPage`, `TasksPage`, `SettingsPage`。
    *   **核心组件 (Components):** `SidebarNav` (导航栏), `NoteEditor` (Markdown 编辑器), `NoteList` (笔记列表), `TaskList` (任务列表), `TaskItem` (单个任务), `PomodoroTimer` (计时器), `WeatherWidget` (天气组件), `CompletedTasksChart` (图表), `ProjectFocusChart` (图表), `WordCountChart` (图表)。
*   **用户流程 (User Flow):**
    1.  **新用户:** 访问网站 -> 点击注册 -> 输入信息 -> 注册成功，自动登录 -> 跳转至仪表盘。
    2.  **创建任务并设置提醒:** 进入 `TasksPage` -> 选择一个项目 -> 点击“新建任务” -> 填写标题、设置截止日期和提醒时间 -> 保存 -> 任务出现在列表中。到达提醒时间，桌面弹出通知。
    3.  **开始专注:** 进入仪表盘或专属专注页面 -> 选择一个关联项目 -> 点击“开始专注” -> 计时器开始倒计时 -> 时间结束，系统记录一次专注活动。
*   **数据交互 (Data Interaction):**
    *   登录时，向后端发送用户名密码，获取 **认证令牌 (Auth Token)** 并存储。
    *   每次切换页面（如笔记、任务），向后端请求相应的数据列表。
    *   创建/编辑/删除任何数据时，向后端对应的 API 发送请求。
    *   仪表盘加载时，向后端请求所有分析数据。

##### **后端 (Backend)**

*   **API 接口 (API Endpoints):** (所有受保护接口都需要在请求头中携带认证令牌)
    *   **用户认证 (Auth)**
        *   `POST /api/users/register`: 注册新用户。
        *   `POST /api/auth/login`: 用户登录，成功后返回 `access_token`。
    *   **笔记 (Notes)**
        *   `GET /api/notes`: 获取当前用户的所有笔记。
        *   `POST /api/notes`: 创建一条新笔记。
        *   `PUT /api/notes/:id`: 更新指定 ID 的笔记。
        *   `DELETE /api/notes/:id`: 删除指定 ID 的笔记。
    *   **项目 (Projects)**
        *   `GET /api/projects`: 获取所有项目。
        *   `POST /api/projects`: 创建新项目。
    *   **任务 (Tasks)**
        *   `GET /api/tasks`: 获取所有任务 (可带 `?project_id=` 过滤)。
        *   `POST /api/tasks`: 创建新任务。
        *   `PUT /api/tasks/:id`: 更新任务 (如修改状态、优先级)。
        *   `DELETE /api/tasks/:id`: 删除任务。
    *   **专注记录 (Focus Sessions)**
        *   `POST /api/focus-sessions`: 创建一条专注记录。
    *   **数据分析 (Analytics)**
        *   `GET /api/analytics/tasks-summary`: 获取任务完成统计数据。
        *   `GET /api/analytics/focus-distribution`: 获取项目专注时长分布数据。
        *   `GET /api/analytics/word-count-trend`: 获取笔记字数增长数据。
    *   **数据备份 (Backup)**
        *   `GET /api/data/export`: 导出用户所有数据。
        *   `POST /api/data/import`: 导入数据。

*   **数据模型 (Data Models):** (数据库表结构设计)
    *   **User:**
        *   `id` (主键), `username`, `email`, `password_hash` (密码加盐哈希后存储，绝不存明文), `created_at`。
    *   **Note:**
        *   `id`, `user_id` (关联用户), `title`, `content` (Markdown 文本), `folder` (文件夹名), `created_at`, `updated_at`。
    *   **Project:**
        *   `id`, `user_id`, `name`, `color` (可选，用于区分项目)。
    *   **Task:**
        *   `id`, `user_id`, `project_id` (关联项目), `title`, `status` (e.g., 'todo', 'done'), `priority` (e.g., 'low', 'medium', 'high'), `due_date`, `remind_at` (提醒时间)。
    *   **FocusSession:**
        *   `id`, `user_id`, `project_id`, `start_time`, `duration_minutes`。

#### **4. 技术栈建议 (Tech Stack Suggestion)**

对于初学者，我推荐一个易于上手且功能强大的组合：

*   **前端:** **Vue.js 3**
    *   **为什么?** Vue 的学习曲线平缓，文档非常友好，其组件化思想能让您轻松构建界面的各个部分。
    *   **UI 库:** **Element Plus** 或 **Naive UI**。它们提供了大量预制好的高质量组件（按钮、表单、布局等），极大加速开发。
    *   **图表库:** **ECharts** 或 **Chart.js**，用于实现数据分析图表。
*   **后端:** **Python Flask**
    *   **为什么?** Flask 是一个“微框架”，代码简洁，没有太多魔法，让您能更好地理解 Web 后端的运作原理。
    *   **数据库:** **SQLite**
        *   **为什么?** 它是一个文件型数据库，无需任何安装配置，非常适合开发和学习阶段。项目壮大后可以无缝切换到 **PostgreSQL** 等更专业的数据库。
    *   **认证:** **JWT (JSON Web Tokens)**，用于实现无状态的用户认证。

#### **5. 开发步骤建议 (Development Steps)**

我为您将整个项目拆解为可管理的小步骤，您可以按顺序一一攻克：

1.  **第一阶段：环境搭建与用户系统**
    *   `[后端]` 初始化 Python Flask 项目，创建虚拟环境。
    *   `[后端]` 定义 `User` 数据模型，使用 SQLAlchemy-Flask 配置好 SQLite 数据库。
    *   `[后端]` 编写 `POST /api/users/register` 和 `POST /api/auth/login` 接口，务必实现密码哈希加密。
    *   `[前端]` 初始化 Vue.js 3 项目，配置好 Vue Router。
    *   `[前端]` 创建登录页和注册页，并与后端接口联调，实现用户的注册和登录，并将获取到的 `token` 存储在浏览器的 `localStorage` 中。

2.  **第二阶段：实现核心功能（笔记和任务）**
    *   `[后端]` 定义 `Note`, `Project`, `Task` 模型及对应的增删改查 (CRUD) API 接口。
    *   `[前端]` 创建受保护的路由守卫（未登录用户无法访问主页）。
    *   `[前端]` 构建主界面布局（左侧导航栏+右侧内容区）。
    *   `[前端]` 开发笔记页面，实现笔记列表的展示、创建、编辑（可先用普通 `textarea`，后续再集成 Markdown 编辑器）。
    *   `[前端]` 开发任务页面，实现项目和任务的管理。

3.  **第三阶段：集成高级功能**
    *   `[前端]` 在笔记编辑区集成一个 Markdown 编辑器库（如 `v-md-editor` 或 `cherry-markdown`）。
    *   `[前端]` 开发专注计时器组件，并编写 `[后端]` 接口 (`POST /api/focus-sessions`)来记录专注数据。
    *   `[前端]` 开发提醒功能，在设置任务时使用浏览器 `Notification API` 请求授权并设置定时通知。

4.  **第四阶段：仪表盘与数据可视化**
    *   `[后端]` 编写三个数据分析接口 (`/api/analytics/...`)，用于从数据库中查询并处理统计数据。
    *   `[前端]` 开发仪表盘页面。
    *   `[前端]` 引入图表库 (ECharts)，调用后端接口获取数据，并绘制三个统计图表。
    *   `[前端]` 开发天气组件，使用浏览器的 `Geolocation API` 和一个免费的天气 API (如 OpenWeatherMap) 实现。

5.  **第五阶段：收尾与完善**
    *   `[后端]` 编写数据导出和导入的接口。
    *   `[前端]` 在设置页面添加入口，实现数据备份功能。
    *   `[前端]` 实现浅色/深色主题切换功能。
    *   对整体 UI/UX 进行打磨和美化。

现在，您拥有了一份非常清晰的行动指南。请随时开始您的第一个任务，当您在任何一步遇到困难或需要更具体的代码示例时，请随时向我提问。

祝您开发愉快！